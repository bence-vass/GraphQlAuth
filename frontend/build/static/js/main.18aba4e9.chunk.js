(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{48:function(e,t,a){e.exports=a.p+"static/media/va-logo.40bea301.svg"},50:function(e,t,a){e.exports=a.p+"static/media/text.0d212e0d.svg"},51:function(e,t,a){e.exports=a.p+"static/media/react-grey.9531e039.svg"},52:function(e,t,a){e.exports=a.p+"static/media/jwt.b819a753.svg"},53:function(e,t,a){e.exports=a.p+"static/media/apollo.e7a87bb6.svg"},54:function(e,t,a){e.exports=a.p+"static/media/graphql.81b66a4f.svg"},55:function(e,t,a){e.exports=a.p+"static/media/figill.63f18e4b.svg"},60:function(e,t,a){e.exports=a.p+"static/media/jwtFig.fc6d1dc8.svg"},61:function(e,t,a){e.exports=a.p+"static/media/apolloDiagram.ee7fbac9.svg"},62:function(e,t,a){e.exports=a.p+"static/media/apolloCaching.d715e957.png"},63:function(e,t,a){e.exports=a.p+"static/media/queryexample.20223a72.png"},64:function(e,t,a){e.exports=a.p+"static/media/graphqlquery.e78bab8e.png"},65:function(e,t,a){e.exports=a(79)},71:function(e,t,a){},72:function(e,t,a){},79:function(e,t,a){"use strict";a.r(t);var n=a(46),r=a(24),l=a.n(r),o=a(30),i=a(17),c=a(0),s=a.n(c),u=a(47),m=a.n(u),h=(a(71),a(72),a(5)),d=a(10),p=a(48),f=a.n(p),E=function(){return s.a.createElement("ul",{className:"navbar"},s.a.createElement("li",null,s.a.createElement(h.b,{to:"/"},"Home")),s.a.createElement("li",null,s.a.createElement(h.b,{to:"/example"},"Example")),s.a.createElement("li",null,s.a.createElement(h.b,{to:"/codes"},"Codes")),s.a.createElement("li",null,s.a.createElement(h.b,{to:"/about"},"About")),s.a.createElement("a",{href:"https://bencevass.com/"},s.a.createElement("img",{src:f.a,alt:"Bence Vass"})))},b=a(6),g=a(7),v=a(9),y=a(8),w=a(50),k=a.n(w),x=a(51),j=a.n(x),O=a(52),I=a.n(O),S=a(53),q=a.n(S),N=a(54),A=a.n(N),C=a(55),T=a.n(C),D=function(e){return s.a.createElement("div",{className:"fig",style:e.style},s.a.createElement("img",{src:T.a,alt:"fig"}),e.children?s.a.createElement("div",{className:"text",style:e.textStyle},e.children):null)},G=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"home"},s.a.createElement("div",{className:"text"},s.a.createElement("img",{src:k.a,alt:"GraphQAuth"})),s.a.createElement("div",{className:"desc"},"Example project for JWT authentication in an SPA React.js app with Apollo through GraphQl API"),s.a.createElement(D,{style:{position:"absolute"}},"Hello, It is a showcase example of the JWT Auth.",s.a.createElement("br",null),"Check out the demo on the ",s.a.createElement(h.b,{to:"/example"},"example page"),s.a.createElement("br",null),"For more about the fundamentals, check out the ",s.a.createElement(h.b,{to:"/about"},"about page")),s.a.createElement("div",{className:"tech"},s.a.createElement("div",{className:"techContainer"},s.a.createElement("img",{src:j.a,alt:"react"})),s.a.createElement("div",{className:"techContainer"},s.a.createElement("img",{src:I.a,alt:"jwt"})),s.a.createElement("div",{className:"techContainer"},s.a.createElement("img",{src:q.a,alt:"apollo"})),s.a.createElement("div",{className:"techContainer"},s.a.createElement("img",{src:A.a,alt:"graphql"}))),s.a.createElement(h.b,{to:"/about"},s.a.createElement("h2",null,"More about the tech")))}}]),a}(c.Component),$=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",null,localStorage.getItem("token")?s.a.createElement(d.a,{to:"/example/profile"}):s.a.createElement(d.a,{to:"/example/signup"}))}}]),a}(c.Component),P=a(27),Q=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"codes"},s.a.createElement(D,{style:{position:"fixed"},textStyle:{transform:"translate(100%, -5%)"}},s.a.createElement("div",{style:{textAlign:"left"}},"You can read here about:",s.a.createElement("ul",{style:{listStyleType:"none",margin:"10px",padding:0}},s.a.createElement("a",{href:"#prologue"},s.a.createElement("li",null,s.a.createElement("b",null,"The goal"))),s.a.createElement("li",null,s.a.createElement("b",null,"Frontend:"),s.a.createElement("ul",null,s.a.createElement("a",{href:"#auth"},s.a.createElement("li",null,"Authentication")),s.a.createElement("a",{href:"#store"},s.a.createElement("li",null,"Storing the tokens")),s.a.createElement("a",{href:"#refresh"},s.a.createElement("li",null,"Refreshing token")),s.a.createElement("a",{href:"#logout"},s.a.createElement("li",null,"Logout Method")),s.a.createElement("a",{href:"#expDisp"},s.a.createElement("li",null,"Expiration Display")),s.a.createElement("a",{href:"#refetch"},s.a.createElement("li",null,"Refetch Data")),s.a.createElement("a",{href:"#update"},s.a.createElement("li",null,"Update Data")))),s.a.createElement("li",null,s.a.createElement("b",null,"Backend:"),s.a.createElement("ul",null,s.a.createElement("li",null,"Graphene-Django"))),s.a.createElement("li",null,s.a.createElement("b",null,"DevOps:"),s.a.createElement("ul",null,s.a.createElement("a",{href:"#docker"},s.a.createElement("li",null,"Docker"))))))),s.a.createElement("a",{href:"https://github.com/bence-vass/GraphQlAuth",target:"_blank"},s.a.createElement("div",null,s.a.createElement("h3",null,"Source: Github repo"))),s.a.createElement("script",{src:"https://gist.github.com/bence-vass/3c363248e8dacfd7eaba9c5ddcc658b1.js"}),s.a.createElement("div",{className:"prologue",id:"prologue"},"I would like to write more about the difficulties of this project. The goal of this project was, that I could learn the usage of the GraphQl, the Apollo Client and the Graphene-Django package. Therefor please note, that this project is not a work of an expert, and there might be better solutions out there. But I am still sharing this with the hope, that others might learn about my mistakes and I can give some practical advise for other newcomers. If your not familiar with the following techs, I would recommend you to read the ",s.a.createElement("a",{href:"/about"},"About Page")," first, where I give a rough description about their fundamentals."),s.a.createElement("div",{className:"frontend"},s.a.createElement("div",null,"This is the most interesting part of this project after all, so take a look on it first."),s.a.createElement("h2",{id:"auth"},"Authentication"),s.a.createElement("div",null,"In terms of basic queries and mutations with the usage of the documentation it was pretty easy to learn it, so the first authentication process was not a difficulty. The client send a request the server response, it is simple, but for permission required data you need to send your authentication token in the request, that cause me the first issue. Despite the fact that it is well documented \xa0",s.a.createElement("a",{href:"https://www.apollographql.com/docs/react/networking/authentication/#header"},"(link here)"),", at first I could not get the idea of the Apollo Links. So I definitely would recommend to read the",s.a.createElement("a",{href:"https://www.apollographql.com/docs/link/overview/"}," concept guide (link here)"),", first and only then start coding.",s.a.createElement("div",null,'For those, who is interested in Graphene package, by default in the authorization the package use "JWT" + token for identification instead of "Bearer".')),s.a.createElement(P.a,{id:"3c363248e8dacfd7eaba9c5ddcc658b1",file:"index1.js"}),s.a.createElement("h2",{id:"store"},"Storing the tokens"),s.a.createElement("div",null,"After the authentication, the client should store the data. As far as I am concerned one of the most popular why the do so, is storing them in the localStorage of the browser. After you leave the site it will remain stored, so even though the access token is expired, the refresh token can be used."),s.a.createElement("h2",{id:"refresh"},"Refreshing token"),s.a.createElement("div",null,"This is also a part of the project, which could not be understood unless you have read the ",s.a.createElement("a",{href:"https://www.apollographql.com/docs/link/overview/"},"Apollo Link guide"),".\xa0 The main concept, that if the access token is expired, with the refresh token the client request a new one. I think one of the best way, when the client made a request and the server respond that signature token is expired, the client should make a token refresh call then try again with the original request. There is no need to refresh tokens right after they are expired, it is easier to catch errors and handle them.",s.a.createElement("br",null),"After a lot of research I found a code in a \xa0",s.a.createElement("a",{href:"https://github.com/apollographql/apollo-link/issues/190#issuecomment-340736211"},"github thread by anju-kosambi"),", with a bit of modification I used it for the refresh process, which I found perfectly viable solution. With the \xa0",s.a.createElement("a",{href:"https://www.apollographql.com/docs/link/links/error/"},"apollo-link-error"),"\xa0 you can catch the error and modify the request accordingly. Although I made it with this method, I would like to mention the there a community link for this purpose \xa0",s.a.createElement("a",{href:"https://github.com/newsiberian/apollo-link-token-refresh"},"(link here) called apollo-link-token-refresh"),"and at this point I can not emphasis enough the how useful could be reading through a documentation.",s.a.createElement("br",null),"This is the first time the I wrote authentication method, therefor it was not go without saying, for me how to handle different situation with token. For example what if the access token is invalid but the refresh is still live, what if the refresh is invalid. After bit of thinking I come to conclusion, that the app can not mess up with the stored data, if the token is invalid it is because of an auth server error or some kind of third party activity. In order to securely manage authentication data, I have found that the easiest way is to logout the user and clear the store."),s.a.createElement(P.a,{id:"3c363248e8dacfd7eaba9c5ddcc658b1",file:"index2.js"}),s.a.createElement("h2",{id:"logout"},"Logout Method"),s.a.createElement("div",null,"The logout method clears the localStorage, clear the Apollo store, and set the values to the required value, then redirect to the home page."),s.a.createElement(P.a,{id:"3c363248e8dacfd7eaba9c5ddcc658b1",file:"index3.js"}),s.a.createElement("h2",{id:"expDisp"},"Expiration Display"),s.a.createElement("div",null,"On each token refresh, Apollo updates the expiration time in its store. When the store is updated, Apollo automatically refetch the given queries and update the containing components. The components get the current time and expiration time and calculates the remaining interval in milliseconds, then set it as a state of the components."),s.a.createElement("h2",{id:"refetch"},"Refetch data"),s.a.createElement("div",null,"With the refetch button on profile page you can update apollo cache with the new server-data. You can see the request and response in your browser developer mode. If the access token has expired, you can see the three request, that have been made. The first is the user info query, which returns in this case an token expiration error. Secondly, the Apollo link catch the error and refresh the access token, and last but not least the original user query, but now with valid data."),s.a.createElement("h2",{id:"update"},"Update data"),s.a.createElement("div",null,"When you update your profile data, a mutation has been made, which tells the server, what kind of modification you intend to do. Normally you should than make a query to update the displayed information, but apollo provide an update function with each mutation, which makes it possible to modify data in the store without actual query, it updates the stored data and handle it as it is newly queried data and rerender the components accordingly.",s.a.createElement("br",null),"In this scenerio the project has been set up this way, that the logged in user can query its data without any identification in the GraphQl request, it  only idetentifies by the Authorization header, therefor there is no need of use ids in this case. I made the mistake that I requested id in the update mutation, there for it got an id in the store too. After the update, when I tried to refetch data it gives me error. I think it is a corner-case, but still worth to mention. This problem can be resolved with the identical fields in both the queries and mutations."),s.a.createElement(P.a,{id:"3c363248e8dacfd7eaba9c5ddcc658b1",file:"ProfileUpdate.js"}),s.a.createElement("h2",{id:"docker"},"Docker"),s.a.createElement("div",null,"First of all, in developer mode the server would stop after it has successfuly started, inorder to prevent that, and make it run, you have to set ",s.a.createElement("b",null,"tty: true"),". For hot reload you have to set the volumes, like it is in the docker code and also important, that you have to set ",s.a.createElement("b",null,"CHOKIDAR_USEPOLLING=true")," in the envirement, unless it will not work."),s.a.createElement(P.a,{id:"3c363248e8dacfd7eaba9c5ddcc658b1",file:"docker-compose.dev.yml"}),s.a.createElement("div",null,"For those ",s.a.createElement("b",null,"who use Mac for development"),", please note that it is not exactly suitable for this purpose. I tried to use it with the following configuration, but the ",s.a.createElement("b",null,"latency made it unusable"),". The request from the frontend toke from ",s.a.createElement("b",null,"15s to 40s to receive response"),"from the backend. It is being said, that it is some kind of sync error and it can be bypassed with the docker-sync library for mac, but I did not want to waste more time with this dead-end.")))}}]),a}(c.Component),W=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"about"},s.a.createElement("div",{className:"tech"},s.a.createElement(h.b,{to:"/about/apollo"},"Apollo Client"),s.a.createElement(h.b,{to:"/about/jwt"},"JWT"),s.a.createElement(h.b,{to:"/about/graphql"},"GraphQl"),s.a.createElement(h.b,{to:"/about/docker"},"Docker")))}}]),a}(c.Component),L=a(29),R=a(20),U=a(23);function F(){var e=Object(i.a)(["\n    mutation CreateUser(\n        $email: String!,\n        $username: String!,\n        $password: String!\n    ){\n        createUser(email: $email, username:$username,\n            password: $password){\n            user{\n                id\n                username\n            }\n        }\n\n    }\n"]);return F=function(){return e},e}var J=Object(R.a)(F()),V=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).changeValue=function(e,t){n.setState(Object(L.a)({},t,e.target.value))},n.state={username:"",email:"",password:""},n}return Object(g.a)(a,[{key:"render",value:function(){var e=this;return console.log(this.state),s.a.createElement(U.a,{mutation:J,onCompleted:function(t){console.log(t),e.setState({email:"",password:"",username:""})},onError:function(e){console.log(e)}},(function(t,a){a.data,a.loading,a.error;return s.a.createElement("div",null,s.a.createElement("h1",null,"Sign up"),s.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t({variables:{email:e.state.email,password:e.state.password,username:e.state.username}})}},s.a.createElement("input",{type:"text",placeholder:"username",value:e.state.username,onChange:function(t){return e.changeValue(t,"username")},required:!0}),s.a.createElement("input",{type:"password",placeholder:"password",value:e.state.password,onChange:function(t){return e.changeValue(t,"password")},required:!0}),s.a.createElement("input",{type:"email",placeholder:"email",value:e.state.email,onChange:function(t){return e.changeValue(t,"email")},required:!0}),s.a.createElement("input",{type:"submit",value:"Sign Up"})))}))}}]),a}(s.a.Component),M=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"signup"},s.a.createElement(D,null,"Please sign up or login on the left"),s.a.createElement(V,null),s.a.createElement(h.b,{to:"/example/login"},s.a.createElement("h2",null,"Login")))}}]),a}(c.Component);function z(){var e=Object(i.a)(["\n    mutation Login($username: String!, $password: String!){\n        tokenAuth(username: $username, password: $password){\n            payload\n            token\n            refreshToken\n            refreshExpiresIn\n        }\n    }\n"]);return z=function(){return e},e}var B=Object(R.a)(z()),Y=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).changeValue=function(e,t){n.setState(Object(L.a)({},t,e.target.value))},n.state={username:"",password:"",redirect:null},n}return Object(g.a)(a,[{key:"render",value:function(){var e=this;return this.state.redirect?s.a.createElement(d.a,{to:"/example/profile"}):s.a.createElement(U.a,{mutation:B,onCompleted:function(t){console.log(t),localStorage.setItem("token",t.tokenAuth.token),localStorage.setItem("refreshToken",t.tokenAuth.refreshToken),localStorage.setItem("exp",t.tokenAuth.payload.exp),localStorage.setItem("refreshExp",t.tokenAuth.refreshExpiresIn),e.setState({redirect:!0})}},(function(t,a){var n=a.data,r=(a.loading,a.error,a.client);return n&&r.writeData({data:{exp:n.tokenAuth.payload.exp,refreshExp:n.tokenAuth.refreshExpiresIn}}),s.a.createElement("div",null,s.a.createElement("h1",null,"Login"),s.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t({variables:{username:e.state.username,password:e.state.password}})}},s.a.createElement("input",{type:"text",placeholder:"username",required:!0,onChange:function(t){return e.changeValue(t,"username")}}),s.a.createElement("input",{type:"password",placeholder:"password",required:!0,onChange:function(t){return e.changeValue(t,"password")}}),s.a.createElement("input",{type:"submit",value:"login"})))}))}}]),a}(s.a.Component),H=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"login"},s.a.createElement(D,null,"Please sign up or login on the left"),s.a.createElement(Y,null),s.a.createElement(h.b,{to:"/example/signup"},s.a.createElement("h2",null,"Sign Up")))}}]),a}(c.Component);function _(){var e=Object(i.a)(["\n    query{\n        me{\n            username\n            isStaff\n            firstName\n            lastName\n            email\n        }\n    }\n"]);return _=function(){return e},e}var K=Object(R.a)(_()),X=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement(U.b,{query:K,onError:function(e){console.log("profile error")}},(function(e){var t=e.loading,a=e.error,n=e.data,r=(e.updateQuery,e.refetch);return t?s.a.createElement("div",null,"Loading..."):a?s.a.createElement(d.a,{to:"logout"}):s.a.createElement("div",{className:"profile"},s.a.createElement(D,null,"You can see your authentication tokens expiration down below"),s.a.createElement("h1",null,"Profile"),s.a.createElement(h.b,{to:"/example/profile/update"},s.a.createElement("h5",null,"Update Profile")),n&&n.me?n.me.username:"not yet",s.a.createElement("br",null),n.me.firstName?n.me.firstName:"not given",s.a.createElement("br",null),n.me.lastName?n.me.lastName:"not given",s.a.createElement("br",null),n.me.email?n.me.email:"not given",s.a.createElement("br",null),s.a.createElement("button",{onClick:function(){r()}},"Refetch data"),s.a.createElement("br",null),s.a.createElement(h.b,{to:"/example/logout"},"Logout"))}))}}]),a}(c.Component),Z=a(11),ee=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement(Z.a,null,(function(e){return localStorage.clear(),e.writeData({data:{exp:0,refreshExp:0}}),e.clearStore(),s.a.createElement(d.a,{to:"/example/login"})}))}}]),a}(c.Component),te=a(34),ae=a.n(te),ne=a(41);function re(e,t){for(var a=e+"";a.length<t;)a="0"+a;return a}var le=function(e){var t=Object(c.useState)(0),a=Object(ne.a)(t,2),n=a[0],r=a[1],l=Object(c.useState)(0),o=Object(ne.a)(l,2),i=o[0],u=o[1];return i!==e.exp&&(u(e.exp),r(Math.floor((Number(1e3*e.exp)-Number(new Date))/1e3))),Object(c.useEffect)((function(){var e=n>0&&setInterval((function(){r(n-1)}),1e3);return function(){return clearInterval(e)}}),[n]),n<=0?s.a.createElement("span",null,"00 : 00"):s.a.createElement("span",null,re(Math.floor(n/60),2)," : ",re(n-60*Math.floor(n/60),2))};function oe(){var e=Object(i.a)(["{exp refreshExp}"]);return oe=function(){return e},e}var ie=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(){return Object(b.a)(this,a),t.apply(this,arguments)}return Object(g.a)(a,[{key:"render",value:function(){return s.a.createElement(U.b,{query:ae()(oe()),fetchPolicy:"cache-only"},(function(e){var t=e.data;return t?s.a.createElement("div",{className:"tokenDisplay"},s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",{colSpan:2,className:"title"},s.a.createElement("span",null,"Expiration")))),s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{className:"text"},"Access Token:")),s.a.createElement("th",null,s.a.createElement("b",null,s.a.createElement(le,{exp:t.exp})))),s.a.createElement("tr",null,s.a.createElement("th",null,s.a.createElement("span",{className:"text"},"Refresh Token:")),s.a.createElement("th",null,s.a.createElement("b",null,s.a.createElement(le,{exp:t.refreshExp}))))))):null}))}}]),a}(c.Component),ce=a(60),se=a.n(ce),ue=["#fb015b","#d63aff","#00b9f1"];var me=function(){return s.a.createElement("div",null,s.a.createElement(D,null,"About the jwt"),s.a.createElement("div",{className:"about-container"},s.a.createElement("h2",null,"JSON Web Tokens"),s.a.createElement("div",null,s.a.createElement("i",null,'"JSON Web Tokens are an open, industry standard RFC 7519 method for representing claims securely between two parties."')),s.a.createElement("div",null,"This is your access token:"),s.a.createElement("div",{className:"token"},s.a.createElement("b",null,localStorage.getItem("token")?localStorage.getItem("token").split(".").map((function(e,t){return s.a.createElement("span",null,s.a.createElement("span",{style:{color:ue[t]}},e),2!==t?".":null)})):null)),s.a.createElement("div",null,"It has three parts: the header, which contains the algorithm and token type, the payload which is the data it self, and the verifying signature.\xa0",s.a.createElement("a",{href:"https://jwt.io/"},"You can check out the the decoded data on the official site of JWT")),s.a.createElement("button",{onClick:function(){localStorage.getItem("token")&&function(e){var t=document.createElement("textarea");document.body.appendChild(t),t.value=e,t.select(),document.execCommand("copy"),document.body.removeChild(t)}(localStorage.getItem("token")),window.open("https://jwt.io/")}},"Copy Token and Redirect to jwt.io"),s.a.createElement("img",{src:se.a,alt:"jwt",className:"ill-img"}),s.a.createElement("div",null,"In this experimental case you have significantly shorter token expiration time, for the purpose of demonstration, but in real life scenario the access token lives about 15 min and the refresh token around a week."),s.a.createElement("div",null,"For more advanced security you can generate new refresh token with access token. In this project, after the request, the server revoke the previous token and only with the newly generated credentials can be the process repeated.")))},he=a(61),de=a.n(he),pe=a(62),fe=a.n(pe),Ee=function(){return s.a.createElement("div",null,s.a.createElement(D,null,"If you are not familiar with Apollo Client please read this short description or read the documentation, for better understanding."),s.a.createElement("div",{className:"about-container"},s.a.createElement("h2",null,"Apollo Client"),s.a.createElement("i",null,'"Apollo Client is a complete state management library for JavaScript apps. Simply write a GraphQL query, and Apollo Client will take care of requesting and caching your data, as well as updating your UI."'),s.a.createElement("img",{src:de.a,alt:"apollo graphq"}),s.a.createElement("div",null,"With Apollo you can query and mutate data, with the greatest ease, since you can use the exact code that you use with GraphQl UI. In concept it is very different from Redux, but in use it is pretty similar. It helps you to manage data through components, which makes Redux in this case unnecessary, in my opinion."),s.a.createElement("img",{src:fe.a,alt:"apollo graphq"}),s.a.createElement("a",{href:"https://www.apollographql.com/docs/"},s.a.createElement("div",null,"For more detailed description, please check out the official documentation (link here)"))))},be=function(){return s.a.createElement("div",null,s.a.createElement(D,null,"Here you can learn more about the stacks"),"hello")};function ge(){var e=Object(i.a)(["\n    query{\n        me{\n            username\n            isStaff\n            firstName\n            lastName\n            email\n        }\n    }\n"]);return ge=function(){return e},e}function ve(){var e=Object(i.a)(["\n    mutation UpdateProfile(\n        $firstname: String,\n        $lastname: String,\n        $email: String,\n    ){\n        updateProfile(firstName: $firstname, lastName: $lastname, email: $email){\n            user{\n                username\n                firstName\n                lastName\n                email\n            }\n        }\n    }\n"]);return ve=function(){return e},e}var ye=Object(R.a)(ve()),we=Object(R.a)(ge()),ke=function(e){Object(v.a)(a,e);var t=Object(y.a)(a);function a(e){var n;return Object(b.a)(this,a),(n=t.call(this,e)).changeValue=function(e,t){n.setState(Object(L.a)({},t,e.target.value))},n.state={firstname:"",lastname:"",email:"",redirect:!1},n}return Object(g.a)(a,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(U.b,{query:we,onCompleted:function(){var t=Object(o.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setState({firstname:a.me.firstName,lastname:a.me.lastName,email:a.me.email});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},(function(e){e.data,e.called;return null})),s.a.createElement(U.a,{mutation:ye,update:function(e,t){var a=t.data.updateProfile.user;e.writeQuery({query:we,data:{me:a}})}},(function(t,a){a.data;return e.state.redirect?s.a.createElement(d.a,{to:"/example/profile"}):s.a.createElement("div",null,s.a.createElement("form",{onSubmit:function(a){a.preventDefault(),t({variables:{firstname:e.state.firstname,lastname:e.state.lastname,email:e.state.email}}),e.setState({redirect:!0})}},s.a.createElement("input",{type:"text",placeholder:"First name",value:e.state.firstname,onChange:function(t){return e.changeValue(t,"firstname")}}),s.a.createElement("input",{type:"text",placeholder:"Last name",value:e.state.lastname,onChange:function(t){return e.changeValue(t,"lastname")}}),s.a.createElement("input",{type:"email",placeholder:"Email address",value:e.state.email,onChange:function(t){return e.changeValue(t,"email")}}),s.a.createElement("input",{type:"submit",value:"Update"})))})))}}]),a}(c.Component),xe=function(){return s.a.createElement("div",null,s.a.createElement(D,null),s.a.createElement("div",{className:"about-container"},s.a.createElement("h2",null,"Docker"),s.a.createElement("i",null,s.a.createElement("div",null,'"Docker is a platform for developers and sysadmins to build, run, and share applications with containers. The use of containers to deploy applications is called containerization. Containers are not new, but their use for easily deploying applications is."')),s.a.createElement("div",null,"Docker can be useful for every kind of project in order to easily setup at all environment. My first intention was, to dockerize the back- and frontend even in the development state. ")))},je=a(63),Oe=a.n(je),Ie=a(64),Se=a.n(Ie),qe=function(){return s.a.createElement("div",null,s.a.createElement(D,null),s.a.createElement("div",{className:"about-container"},s.a.createElement("h2",null,"GraphQl"),s.a.createElement("i",null,s.a.createElement("div",null,'"GraphQL is a query language for APIs and a runtime for fulfilling those queries with your existing data. GraphQL provides a complete and understandable description of the data in your API, gives clients the power to ask for exactly what they need and nothing more, makes it easier to evolve APIs over time, and enables powerful developer tools."')),s.a.createElement("img",{src:Oe.a,alt:"qraphql"}),s.a.createElement("div",null,"I had experiences with RestAPI, but after using GraphQl, I do not see RestAPI as the best solution for backend-frontend communication. Despite the fact that, I did not make any measurements between these two in terms of computation demand and speed, but it is clear that the GraphQl is more capable with the now days standards. With the solution that you only query data, that you need, it is capable to sending significantly smaller requests and responses. After all, since everything about the UX, and some countries have exceedingly slow mobile data connection, it could be the best solution to increase user experience."),s.a.createElement("img",{src:Se.a,alt:"graphql"}),s.a.createElement("a",{href:"https://graphql.org/learn/"},s.a.createElement("div",null,"You can check out the GraphQl site for more advanced description (link here)"))))};var Ne=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(h.a,null,s.a.createElement(E,null),s.a.createElement(d.b,{path:"/about"},s.a.createElement(W,null)),s.a.createElement(d.b,{path:"/example"},s.a.createElement(ie,null)),s.a.createElement(d.d,null,s.a.createElement(d.b,{path:"/example/signup"},s.a.createElement(M,null)),s.a.createElement(d.b,{path:"/example/login"},s.a.createElement(H,null)),s.a.createElement(d.b,{path:"/example/logout"},s.a.createElement(ee,null)),s.a.createElement(d.b,{path:"/example/profile/update"},s.a.createElement(ke,null)),s.a.createElement(d.b,{path:"/example/profile"},s.a.createElement(X,null)),s.a.createElement(d.b,{path:"/example"},s.a.createElement($,null)),s.a.createElement(d.b,{path:"/codes"},s.a.createElement(Q,null)),s.a.createElement(d.b,{path:"/about/apollo"},s.a.createElement(Ee,null)),s.a.createElement(d.b,{path:"/about/jwt"},s.a.createElement(me,null)),s.a.createElement(d.b,{path:"/about/graphql"},s.a.createElement(qe,null)),s.a.createElement(d.b,{path:"/about/docker"},s.a.createElement(xe,null)),s.a.createElement(d.b,{exact:!0,path:"/about"},s.a.createElement(be,null)),s.a.createElement(d.b,{exact:!0,path:"/"},s.a.createElement(G,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=a(21),Ce=a(28),Te=a(12),De=a(15),Ge=a(25),$e=a(32);function Pe(){var e=Object(i.a)(["\n    mutation RefreshToken($token: String!) {\n        refreshToken(refreshToken: $token) {\n            token\n            payload\n            refreshToken\n            refreshExpiresIn\n        }\n    }\n"]);return Pe=function(){return e},e}var Qe=Object(R.a)(Pe()),We=function(){var e=Object(o.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ve.mutate({mutation:Qe,variables:{token:t}}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Le=["Signature has expired"],Re=new Ce.a({uri:"http://localhost:8000/graphql/"}),Ue=new Te.a((function(e,t){return localStorage.getItem("token")&&e.setContext({headers:{authorization:"JWT "+localStorage.getItem("token")}}),t(e)})),Fe=Object($e.a)((function(e){var t=e.graphQLErrors,a=(e.networkError,e.operation),r=e.forward;if(t){var l,o=Object(n.a)(t);try{for(o.s();!(l=o.n()).done;){var i=l.value;if(Le.includes(i.message)){if(localStorage.getItem("refreshToken"))return new De.a((function(e){We(localStorage.getItem("refreshToken")).then((function(e){localStorage.setItem("token",e.data.refreshToken.token),localStorage.setItem("refreshToken",e.data.refreshToken.refreshToken),localStorage.setItem("exp",e.data.refreshToken.payload.exp),a.setContext({headers:{authorization:"JWT "+e.data.refreshToken.token}}),Ve.writeData({data:{exp:e.data.refreshToken.payload.exp}})})).catch((function(e){console.log(e),console.log("err in refresh")})).then((function(){var t={next:e.next.bind(e),error:e.error.bind(e),complete:e.complete.bind(e)};r(a).subscribe(t)})).catch((function(t){console.log("error at end of reauth"),e.error(t)}))}))}else console.log("unhandled"),console.log(i)}}catch(i){o.e(i)}finally{o.f()}}})),Je=new Ge.a,Ve=new Ae.a({cache:Je,link:Object(Te.c)([Fe,Ue,Re])}),Me={exp:0,refreshExp:0};localStorage.getItem("exp")&&localStorage.getItem("refreshExp")&&(Me={exp:localStorage.getItem("exp"),refreshExp:localStorage.getItem("refreshExp")}),Je.writeData({data:Me}),Ve.onClearStore(Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.writeData({data:Me});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),Ve.onResetStore(Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Je.writeData({data:Me});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),m.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(Z.b,{client:Ve},s.a.createElement(Ne,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[65,1,2]]]);
//# sourceMappingURL=main.18aba4e9.chunk.js.map